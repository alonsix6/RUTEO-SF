<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>RUTEO ‚Äî RESET 2025 San Fernando</title>

<!-- Google Fonts -->
<link href="https://fonts.googleapis.com/css2?family=Bebas+Neue&family=Montserrat:wght@400;500;600;700;800;900&display=swap" rel="stylesheet">

<!-- CSS Stylesheets -->
<link rel="stylesheet" href="css/variables.css?v=3.4">
<link rel="stylesheet" href="css/themes.css?v=3.4">
<link rel="stylesheet" href="css/layout.css?v=3.4">
<link rel="stylesheet" href="css/navigation.css?v=3.4">
<link rel="stylesheet" href="css/forms.css?v=3.4">
<link rel="stylesheet" href="css/cards.css?v=3.4">
<link rel="stylesheet" href="css/history.css?v=3.4">
<link rel="stylesheet" href="css/modals.css?v=3.4">
<link rel="stylesheet" href="css/config.css?v=3.4">
<link rel="stylesheet" href="css/utilities.css?v=3.4">
<link rel="stylesheet" href="css/responsive.css?v=3.4">
</head>

<body>

<!-- ============================================
     üèóÔ∏è HTML SECTION 1: CONTAINER Y HEADER
     ============================================ -->

<div class="container">

  <!-- --- Header Principal --- -->
  <div class="header">
    <h1>RUTEO</h1>
    <p>RESET ‚Äî San Fernando</p>
  </div>

  <!-- ============================================
       üèóÔ∏è HTML SECTION 2: NAVEGACI√ìN TOP HEADER
       ============================================ -->

  <!-- --- Top Navigation Header --- -->
  <nav class="top-nav">
    <!-- Config Button con Texto "Ajustes" -->
    <button class="config-btn" onclick="openConfigModal()" title="Configuraci√≥n">
      <span>‚öôÔ∏è</span>
      <span>Ajustes</span>
    </button>

    <!-- Theme Toggle Button (Dropdown) -->
    <div style="position: relative;">
      <button class="theme-toggle" onclick="toggleThemeMenu()" title="Cambiar tema" id="themeToggle">
        <span>üé®</span>
        <span>Temas</span>
      </button>

      <!-- Theme Menu Dropdown -->
      <div id="themeMenu" class="theme-menu hidden">
        <div class="theme-option" onclick="changeTheme('dark')" data-theme="dark">
          <span>üåô</span> <span class="theme-text">Oscuro</span>
        </div>
        <div class="theme-option" onclick="changeTheme('light')" data-theme="light">
          <span>‚òÄÔ∏è</span> <span class="theme-text">Claro</span>
        </div>
        <div class="theme-option" onclick="changeTheme('ocean')" data-theme="ocean">
          <span>üåä</span> <span class="theme-text">Ocean Blue</span>
        </div>
        <div class="theme-option" onclick="changeTheme('forest')" data-theme="forest">
          <span>üåø</span> <span class="theme-text">Forest Green</span>
        </div>
        <div class="theme-option" onclick="changeTheme('pink')" data-theme="pink">
          <span>üíñ</span> <span class="theme-text">Pink</span>
        </div>
      </div>
    </div>
  </nav>

  <!-- ============================================
       üèóÔ∏è HTML SECTION 3: FORMULARIO PRINCIPAL
       ============================================ -->

  <div class="form-container">
    <div class="card">
      <div class="card-title">üß© Crear Nueva UTM</div>

      <!-- --- Form --- -->
      <form id="utmForm" autocomplete="off">

        <!-- URL de Destino -->
        <div class="form-group full">
          <label>URL de Destino *</label>
          <select id="urlDestino" required>
            <option value="">Seleccionar URL...</option>
            <option value="https://delivery.sanfernando.pe/">Delivery ‚Äì Home</option>
            <option value="https://delivery.sanfernando.pe/categorias/pollo">Delivery ‚Äì Pollo</option>
            <option value="https://delivery.sanfernando.pe/categorias/embutidos">Delivery ‚Äì Embutidos</option>
            <option value="https://delivery.sanfernando.pe/categorias/huevo">Delivery ‚Äì Huevos</option>
            <option value="https://delivery.sanfernando.pe/vales">Delivery ‚Äì Vales</option>
            <option value="custom">‚ûï URL Personalizada</option>
          </select>
          <input id="urlCustom" class="hidden" type="url" placeholder="https://example.com" style="margin-top:8px"/>
        </div>

        <!-- Divisi√≥n y Plataforma -->
        <div class="form-row">
          <div class="form-group">
            <label>Divisi√≥n *</label>
            <select id="division" required>
              <option value="">Seleccionar...</option>
              <option value="brand">Brand</option>
              <option value="ecommerce">Ecommerce</option>
            </select>
          </div>
          <div class="form-group">
            <label>Plataforma *</label>
            <select id="plataforma" required>
              <option value="">Seleccionar...</option>
              <option value="facebook">Meta (FB / IG)</option>
              <option value="google">Google</option>
              <option value="tiktok">TikTok</option>
              <option value="linkedin">LinkedIn</option>
              <option value="twitter">X (Twitter)</option>
              <option value="programatica">Program√°tica</option>
            </select>
          </div>
        </div>

        <!-- Medium y Objetivo -->
        <div class="form-row">
          <div class="form-group">
            <label>Medium (auto)</label>
            <input id="medium" type="text" readonly placeholder="Se genera seg√∫n plataforma"/>
          </div>
          <div class="form-group">
            <label>Objetivo *</label>
            <select id="objetivo" required>
              <option value="">Seleccionar...</option>
              <option value="trafico">Tr√°fico</option>
              <option value="conversiones">Conversiones</option>
              <option value="interacciones">Interacciones</option>
              <option value="reproducciones">Reproducciones</option>
              <option value="alcance">Alcance</option>
            </select>
          </div>
        </div>

        <!-- Tipo de Campa√±a Google (Condicional) -->
        <div id="mediumGoogleGroup" class="form-group hidden">
          <label>Tipo de Campa√±a Google</label>
          <select id="mediumGoogle">
            <option value="">Seleccionar...</option>
            <option value="paid-search">SEM (paid-search)</option>
            <option value="cross-network">PMAX (cross-network)</option>
            <option value="display">Display</option>
            <option value="video">Video</option>
          </select>
        </div>

        <!-- Tipo de Campa√±a y Motivo -->
        <div class="form-row">
          <div class="form-group">
            <label>Tipo de Campa√±a *</label>
            <select id="tipoCampana" required>
              <option value="">Seleccionar...</option>
              <option value="AON">AON (Always On)</option>
              <option value="Cyber">Cyber</option>
              <option value="HUEVOS">HUEVOS</option>
              <option value="NAVIDADB2B">NAVIDADB2B</option>
              <option value="Elaborados">Elaborados</option>
              <option value="account_link" id="accountLinkOption" style="display:none;">account_link</option>
              <option value="custom">‚ûï Personalizada</option>
            </select>
            <input id="campanaCustom" class="hidden" type="text" placeholder="Nombre de campa√±a" style="margin-top:8px"/>
          </div>
          <div class="form-group">
            <label>Motivo/Creatividad *</label>
            <select id="motivo" required>
              <option value="">Seleccionar...</option>
              <option value="VALES">Vales</option>
              <option value="chorizo">Chorizo</option>
              <option value="hamburguesa">Hamburguesa</option>
              <option value="pollo">Pollo</option>
              <option value="embutidos">Embutidos</option>
              <option value="huevos">Huevos</option>
              <option value="DesayunoSangrecita">Desayuno Sangrecita</option>
              <option value="DescuentoWeb">Descuento Web</option>
              <option value="custom">‚ûï Personalizado</option>
            </select>
            <input id="motivoCustom" class="hidden" type="text" placeholder="Descripci√≥n del motivo" style="margin-top:8px"/>
          </div>
        </div>

        <!-- Mes y A√±o -->
        <div class="form-row">
          <div class="form-group">
            <label>Mes *</label>
            <select id="mes" required>
              <option value="">Seleccionar...</option>
              <option>ENERO</option><option>FEBRERO</option><option>MARZO</option>
              <option>ABRIL</option><option>MAYO</option><option>JUNIO</option>
              <option>JULIO</option><option>AGOSTO</option><option>SETIEMBRE</option>
              <option>OCTUBRE</option><option>NOVIEMBRE</option><option>DICIEMBRE</option>
            </select>
          </div>
          <div class="form-group">
            <label>A√±o *</label>
            <select id="ano" required></select>
          </div>
        </div>

        <!-- Placement Meta (Condicional) -->
        <div id="placementGroup" class="form-group hidden">
          <label>Placement (Meta)</label>
          <select id="placement">
            <option value="">Seleccionar...</option>
            <option value="META">META (FB + IG)</option>
            <option value="FB">Solo Facebook</option>
            <option value="IG">Solo Instagram</option>
          </select>
        </div>

        <!-- Campos Brand (Condicionales) -->
        <div id="brandFields" class="form-row hidden" style="margin-top:8px">
          <div class="form-group">
            <label>C√≥digo de Pieza *</label>
            <select id="codigoPieza">
              <option value="">Seleccionar...</option>
              <option value="AON">AON</option>
              <option value="NAB2B">NAB2B</option>
              <option value="HUE">HUE</option>
              <option value="Elaborados">Elaborados</option>
              <option value="custom">‚ûï Otro c√≥digo</option>
            </select>
            <input id="codigoCustom" class="hidden" type="text" placeholder="C√≥digo personalizado" style="margin-top:8px"/>
          </div>
          <div class="form-group">
            <label>N√∫mero de Pieza *</label>
            <select id="numeroPieza"></select>
          </div>
        </div>

        <!-- Buttons -->
        <div class="btn-group">
          <button class="btn btn-primary" type="submit" style="flex:1">üöÄ GENERAR UTM</button>
          <button class="btn btn-secondary" type="button" onclick="resetForm()">üîÑ LIMPIAR</button>
        </div>
      </form>

      <!-- Result Container -->
      <div id="resultContainer" class="hidden">
        <div class="result-box">
          <button class="copy-btn" onclick="copyResult()">üìã Copiar</button>
          <div id="resultText" style="padding-right:70px"></div>
        </div>
      </div>
    </div>
  </div>

  <!-- ============================================
       üèóÔ∏è HTML SECTION 4: HISTORIAL DE UTMs
       ============================================ -->

  <div class="history-container">
    <div class="card">
      <div class="card-title">üìä Historial de UTMs</div>

      <!-- Stats Grid -->
      <div class="stat-grid">
        <div class="stat-card">
          <div class="stat-number" id="totalCount">0</div>
          <div class="stat-label">Total</div>
        </div>
        <div class="stat-card">
          <div class="stat-number" id="brandCount">0</div>
          <div class="stat-label">Brand</div>
        </div>
        <div class="stat-card">
          <div class="stat-number" id="ecomCount">0</div>
          <div class="stat-label">Ecom</div>
        </div>
      </div>

      <!-- Export Buttons -->
      <div class="btn-group" style="margin-bottom:12px">
        <button class="btn btn-success" onclick="exportCSV()">üì• CSV</button>
        <button class="btn btn-success" onclick="exportExcel()" style="background:linear-gradient(135deg,#059669,#047857);">üìä Excel</button>
        <button class="btn btn-warning" onclick="clearHistory()">üóëÔ∏è Borrar</button>
      </div>

      <!-- UTM List -->
      <div id="utmList" class="utm-list"></div>
    </div>
  </div>

  <!-- ============================================
       üèóÔ∏è HTML SECTION 5: FOOTER
       ============================================ -->

  <div class="footer">Powered by <span class="font-display">RESEARCH</span> | Generador UTM v2.1</div>
</div>

<!-- ============================================
     üèóÔ∏è HTML SECTION 6: BOT√ìN DE AYUDA
     ============================================ -->

<button class="help-btn" onclick="openHelp()" title="Ayuda">‚ÑπÔ∏è</button>

<!-- ============================================
     üèóÔ∏è HTML SECTION 6.5: MODAL DE CONFIGURACI√ìN
     ============================================ -->

<div id="configModal" class="config-modal-overlay hidden" onclick="closeConfigModal(event)">
  <div class="config-modal-content" onclick="event.stopPropagation()">

    <!-- Config Modal Header -->
    <div class="config-modal-header">
      <h2>‚öôÔ∏è Configuraci√≥n del Generador</h2>
      <div class="config-header-actions">
        <button class="config-restore-btn" onclick="restoreDefaults()" title="Restaurar valores por defecto">
          üîÑ Restaurar
        </button>
        <button class="config-modal-close" onclick="closeConfigModal()">‚úï</button>
      </div>
    </div>

    <!-- Config Tabs -->
    <div class="config-tabs">
      <button class="config-tab-btn active" onclick="switchConfigTab('urls')" data-tab="urls">
        üìç URLs
      </button>
      <button class="config-tab-btn" onclick="switchConfigTab('campanias')" data-tab="campanias">
        üéØ Campa√±as
      </button>
      <button class="config-tab-btn" onclick="switchConfigTab('motivos')" data-tab="motivos">
        üé® Motivos
      </button>
      <button class="config-tab-btn" onclick="switchConfigTab('codigos')" data-tab="codigos">
        üè∑Ô∏è C√≥digos Brand
      </button>
    </div>

    <!-- Config Modal Body -->
    <div class="config-modal-body">

      <!-- TAB: URLs -->
      <div id="configTabUrls" class="config-tab-content">
        <div class="config-section-title">üìç Gesti√≥n de URLs Predeterminadas</div>

        <!-- URLs List -->
        <div id="urlsList" class="config-items-list"></div>

        <!-- Add Button -->
        <button class="config-add-btn" onclick="showAddUrlForm()">
          ‚ûï Agregar Nueva URL
        </button>

        <!-- Add URL Form (Hidden by default) -->
        <div id="addUrlForm" class="config-form hidden">
          <div class="config-form-title">‚ûï Agregar Nueva URL</div>
          <div class="config-form-group">
            <label>Etiqueta * (sin espacios ni tildes)</label>
            <input type="text" id="urlLabel" placeholder="Ej: Delivery_Promociones" />
          </div>
          <div class="config-form-group">
            <label>URL *</label>
            <input type="url" id="urlValue" placeholder="https://ejemplo.com" />
          </div>
          <div class="config-form-group">
            <label>Categor√≠a (sin espacios ni tildes)</label>
            <input type="text" id="urlCategory" placeholder="Ej: delivery, corporativo" />
          </div>
          <div class="config-form-actions">
            <button class="config-form-btn save" onclick="saveNewUrl()">üíæ Guardar</button>
            <button class="config-form-btn cancel" onclick="cancelAddUrl()">‚ùå Cancelar</button>
          </div>
        </div>

        <!-- Preview -->
        <div class="config-preview-box">
          <div class="config-preview-title">üìä Preview</div>
          <div class="config-preview-content">
            Las URLs configuradas aparecer√°n en el selector "URL de Destino" del formulario principal.
          </div>
        </div>
      </div>

      <!-- TAB: Campa√±as -->
      <div id="configTabCampanias" class="config-tab-content hidden">
        <div class="config-section-title">üéØ Gesti√≥n de Tipos de Campa√±a</div>

        <!-- Campa√±as List -->
        <div id="campanasList" class="config-items-list"></div>

        <!-- Add Button -->
        <button class="config-add-btn" onclick="showAddCampanaForm()">
          ‚ûï Agregar Nueva Campa√±a
        </button>

        <!-- Add Campa√±a Form (Hidden by default) -->
        <div id="addCampanaForm" class="config-form hidden">
          <div class="config-form-title">‚ûï Agregar Nueva Campa√±a</div>
          <div class="config-form-group">
            <label>Nombre * (sin espacios, tildes ni caracteres especiales)</label>
            <input type="text" id="campanaName" placeholder="Ej: BlackFriday, Verano2025" />
          </div>
          <div class="config-form-group">
            <label>Descripci√≥n (sin espacios ni tildes)</label>
            <input type="text" id="campanaDesc" placeholder="Ej: Black_Friday_2025" />
          </div>
          <div class="config-form-group">
            <label>Divisi√≥n *</label>
            <select id="campanaDivision">
              <option value="both">Ambas (Brand + Ecommerce)</option>
              <option value="brand">Solo Brand</option>
              <option value="ecommerce">Solo Ecommerce</option>
            </select>
          </div>
          <div class="config-form-actions">
            <button class="config-form-btn save" onclick="saveNewCampana()">üíæ Guardar</button>
            <button class="config-form-btn cancel" onclick="cancelAddCampana()">‚ùå Cancelar</button>
          </div>
        </div>

        <!-- Preview -->
        <div class="config-preview-box">
          <div class="config-preview-title">üìä Preview UTM</div>
          <div class="config-preview-content">
            <div class="config-preview-label">utm_campaign:</div>
            <div class="config-preview-value" id="previewCampana">brand_conv_[TuCampa√±a]_OCTUBRE_2025</div>
          </div>
        </div>
      </div>

      <!-- TAB: Motivos -->
      <div id="configTabMotivos" class="config-tab-content hidden">
        <div class="config-section-title">üé® Gesti√≥n de Motivos/Creatividades</div>

        <!-- Motivos List -->
        <div id="motivosList" class="config-items-list"></div>

        <!-- Add Button -->
        <button class="config-add-btn" onclick="showAddMotivoForm()">
          ‚ûï Agregar Nuevo Motivo
        </button>

        <!-- Add Motivo Form (Hidden by default) -->
        <div id="addMotivoForm" class="config-form hidden">
          <div class="config-form-title">‚ûï Agregar Nuevo Motivo</div>
          <div class="config-form-group">
            <label>Nombre * (sin espacios, tildes ni caracteres especiales)</label>
            <input type="text" id="motivoName" placeholder="Ej: descuento_verano, promo_2x1" />
          </div>
          <div class="config-form-group">
            <label>Categor√≠a (sin espacios ni tildes)</label>
            <input type="text" id="motivoCategoria" placeholder="Ej: promocion, producto" />
          </div>
          <div class="config-form-group">
            <label>Divisi√≥n *</label>
            <select id="motivoDivision">
              <option value="both">Ambas (Brand + Ecommerce)</option>
              <option value="brand">Solo Brand</option>
              <option value="ecommerce">Solo Ecommerce</option>
            </select>
          </div>
          <div class="config-form-actions">
            <button class="config-form-btn save" onclick="saveNewMotivo()">üíæ Guardar</button>
            <button class="config-form-btn cancel" onclick="cancelAddMotivo()">‚ùå Cancelar</button>
          </div>
        </div>

        <!-- Preview -->
        <div class="config-preview-box">
          <div class="config-preview-title">üìä Preview UTM</div>
          <div class="config-preview-content">
            <div class="config-preview-label">utm_content:</div>
            <div class="config-preview-value" id="previewMotivo">brand_AON_01_META_[TuMotivo]</div>
          </div>
        </div>
      </div>

      <!-- TAB: C√≥digos Brand -->
      <div id="configTabCodigos" class="config-tab-content hidden">
        <div class="config-section-title">üè∑Ô∏è Gesti√≥n de C√≥digos de Pieza (Brand)</div>

        <!-- C√≥digos List -->
        <div id="codigosList" class="config-items-list"></div>

        <!-- Add Button -->
        <button class="config-add-btn" onclick="showAddCodigoForm()">
          ‚ûï Agregar Nuevo C√≥digo
        </button>

        <!-- Add C√≥digo Form (Hidden by default) -->
        <div id="addCodigoForm" class="config-form hidden">
          <div class="config-form-title">‚ûï Agregar Nuevo C√≥digo</div>
          <div class="config-form-group">
            <label>C√≥digo * (sin espacios, tildes ni caracteres especiales)</label>
            <input type="text" id="codigoName" placeholder="Ej: VERANO, PROMO2025" />
          </div>
          <div class="config-form-group">
            <label>Descripci√≥n (sin espacios ni tildes)</label>
            <input type="text" id="codigoDesc" placeholder="Ej: Campana_Verano_2025" />
          </div>
          <div class="config-form-actions">
            <button class="config-form-btn save" onclick="saveNewCodigo()">üíæ Guardar</button>
            <button class="config-form-btn cancel" onclick="cancelAddCodigo()">‚ùå Cancelar</button>
          </div>
        </div>

        <!-- Preview -->
        <div class="config-preview-box">
          <div class="config-preview-title">üìä Preview UTM</div>
          <div class="config-preview-content">
            <div class="config-preview-label">utm_content:</div>
            <div class="config-preview-value" id="previewCodigo">brand_[TuCodigo]_01_META_pollo</div>
          </div>
        </div>
      </div>

    </div>
  </div>
</div>

<!-- ============================================
     üèóÔ∏è HTML SECTION 7: MODAL DE AYUDA
     ============================================ -->

<div id="helpModal" class="modal-overlay hidden" onclick="closeHelp(event)">
  <div class="modal-content" onclick="event.stopPropagation()">

    <!-- Modal Header -->
    <div class="modal-header">
      <h2>üìö Gu√≠a Completa del Generador UTM</h2>
      <button class="modal-close" onclick="closeHelp()">‚úï</button>
    </div>

    <!-- Modal Body -->
    <div class="modal-body">

      <!-- PRESENTACI√ìN -->
      <div class="modal-section">
        <h3>üéØ ¬øQu√© es el Generador UTM?</h3>
        <p>Esta herramienta te permite crear URLs de rastreo personalizadas (UTM) para todas tus campa√±as digitales de San Fernando. Con estas URLs podr√°s identificar exactamente de d√≥nde vienen tus usuarios y qu√© campa√±as generan mejores resultados en Google Analytics 4 y Looker Studio.</p>
      </div>

      <!-- IMPORTANCIA -->
      <div class="modal-section">
        <h3>‚≠ê ¬øPor qu√© es importante?</h3>
        <ul>
          <li><strong>Medici√≥n precisa:</strong> Saber exactamente qu√© plataforma, campa√±a o creatividad genera conversiones</li>
          <li><strong>Optimizaci√≥n de presupuesto:</strong> Invertir en lo que realmente funciona</li>
          <li><strong>Reportes claros:</strong> Filtrar datos f√°cilmente en Analytics y Looker Studio</li>
          <li><strong>Trazabilidad:</strong> Identificar cada pieza gr√°fica y su rendimiento</li>
        </ul>
      </div>

      <!-- DIFERENCIAS BRAND VS ECOM -->
      <div class="modal-section">
        <h3>üè¢ Brand vs Ecommerce</h3>
        <p>Cada divisi√≥n tiene una estrategia diferente de naming seg√∫n sus objetivos:</p>

        <table style="width:100%;border-collapse:collapse;margin:20px 0;">
          <thead>
            <tr style="background:linear-gradient(135deg,#6366f1,#8b5cf6);color:white;">
              <th style="padding:14px;text-align:left;border:none;font-size:1rem;">Caracter√≠stica</th>
              <th style="padding:14px;text-align:left;border:none;font-size:1rem;">BRAND</th>
              <th style="padding:14px;text-align:left;border:none;font-size:1rem;">ECOMMERCE</th>
            </tr>
          </thead>
          <tbody>
            <tr style="background:#f8fafc;">
              <td style="padding:12px;border:1px solid #e2e8f0;font-weight:600;color:#1f2937;">C√≥digo de Pieza</td>
              <td style="padding:12px;border:1px solid #e2e8f0;">‚úÖ S√≠ (AON, NAB2B, HUE, etc.)</td>
              <td style="padding:12px;border:1px solid #e2e8f0;">‚ùå No</td>
            </tr>
            <tr style="background:#ffffff;">
              <td style="padding:12px;border:1px solid #e2e8f0;font-weight:600;color:#1f2937;">N√∫mero de Pieza</td>
              <td style="padding:12px;border:1px solid #e2e8f0;">‚úÖ S√≠ (01, 02, 14, etc.)</td>
              <td style="padding:12px;border:1px solid #e2e8f0;">‚ùå No</td>
            </tr>
            <tr style="background:#f8fafc;">
              <td style="padding:12px;border:1px solid #e2e8f0;font-weight:600;color:#1f2937;">Enfoque</td>
              <td style="padding:12px;border:1px solid #e2e8f0;">Awareness y Branding</td>
              <td style="padding:12px;border:1px solid #e2e8f0;">Producto y Conversi√≥n directa</td>
            </tr>
            <tr style="background:#ffffff;">
              <td style="padding:12px;border:1px solid #e2e8f0;font-weight:600;color:#1f2937;">Ejemplo Campaign</td>
              <td style="padding:12px;border:1px solid #e2e8f0;"><code style="background:#eff6ff;padding:4px 8px;border-radius:4px;font-size:0.85rem;">brand_alc_AON_OCTUBRE_2025</code></td>
              <td style="padding:12px;border:1px solid #e2e8f0;"><code style="background:#eff6ff;padding:4px 8px;border-radius:4px;font-size:0.85rem;">ecommerce_conv_Cyber_OCT_2025</code></td>
            </tr>
            <tr style="background:#f8fafc;">
              <td style="padding:12px;border:1px solid #e2e8f0;font-weight:600;color:#1f2937;">Ejemplo Content</td>
              <td style="padding:12px;border:1px solid #e2e8f0;"><code style="background:#eff6ff;padding:4px 8px;border-radius:4px;font-size:0.85rem;">brand_AON_14_IG_VALES</code></td>
              <td style="padding:12px;border:1px solid #e2e8f0;"><code style="background:#eff6ff;padding:4px 8px;border-radius:4px;font-size:0.85rem;">ecom_META_chorizo</code></td>
            </tr>
          </tbody>
        </table>
      </div>

      <!-- PLATAFORMAS -->
      <div class="modal-section">
        <h3>üåê Plataformas Disponibles</h3>
        <div class="platform-grid">
          <div class="platform-tag">Meta (FB/IG)</div>
          <div class="platform-tag">Google</div>
          <div class="platform-tag">TikTok</div>
          <div class="platform-tag">LinkedIn</div>
          <div class="platform-tag">X (Twitter)</div>
          <div class="platform-tag">Program√°tica</div>
        </div>
      </div>

      <!-- OBJETIVOS Y MEDIUM -->
      <div class="modal-section">
        <h3>üéØ Objetivos y Medium</h3>
        <h4>Objetivos disponibles:</h4>
        <ul>
          <li><strong>Tr√°fico (trf):</strong> Llevar usuarios al sitio</li>
          <li><strong>Conversiones (conv):</strong> Generar compras o acciones espec√≠ficas</li>
          <li><strong>Interacciones (int):</strong> Engagement con el contenido</li>
          <li><strong>Reproducciones (rpr):</strong> Video views</li>
          <li><strong>Alcance (alc):</strong> Maximizar impresiones</li>
        </ul>

        <h4>Medium (se genera autom√°ticamente):</h4>
        <ul>
          <li><strong>paid-social:</strong> Para redes sociales (Meta, TikTok, LinkedIn, etc.)</li>
          <li><strong>paid-search:</strong> Para b√∫squedas en Google (SEM)</li>
          <li><strong>display:</strong> Para banners en Google</li>
          <li><strong>video:</strong> Para campa√±as de video en Google</li>
          <li><strong>cross-network:</strong> Para Performance Max (PMAX)</li>
        </ul>
      </div>

      <!-- PLACEMENT META -->
      <div class="modal-section">
        <h3>üì± Placement en Meta</h3>
        <p>Cuando seleccionas Meta como plataforma, puedes especificar d√≥nde se muestra el anuncio:</p>
        <ul>
          <li><strong>META:</strong> Facebook + Instagram simult√°neamente</li>
          <li><strong>FB:</strong> Solo Facebook</li>
          <li><strong>IG:</strong> Solo Instagram</li>
        </ul>
        <div class="tip-box">
          <strong>üí° Tip:</strong> Esto te permite filtrar resultados por red social espec√≠fica en tus reportes.
        </div>
      </div>

      <!-- GU√çA DE FILTRADO EN GA4 -->
      <div class="modal-section">
        <h3>üìä C√≥mo Filtrar en Google Analytics 4</h3>

        <h4>Ruta b√°sica:</h4>
        <div class="code-example">Reports ‚Üí Acquisition ‚Üí Traffic Acquisition</div>

        <h4>Filtros por plataforma:</h4>
        <p><strong>Para ver solo Meta (Facebook/Instagram):</strong></p>
        <div class="code-example">
Session source = "facebook"<br>
Session medium = "paid-social"<br>
Session manual ad content CONTAINS "META" | "FB" | "IG"
        </div>

        <p><strong>Para ver solo Google Ads:</strong></p>
        <div class="code-example">
Session source = "google"<br>
Session medium = "paid-search" | "display" | "video"
        </div>

        <p><strong>Para ver solo TikTok:</strong></p>
        <div class="code-example">
Session source = "tiktok"<br>
Session medium = "paid-social"
        </div>

        <h4>Filtros avanzados:</h4>
        <p><strong>Ver campa√±as de Brand espec√≠ficas:</strong></p>
        <div class="code-example">
Session campaign CONTAINS "brand"<br>
Session manual ad content CONTAINS "AON" (para Always On)
        </div>

        <p><strong>Ver campa√±as de Ecommerce:</strong></p>
        <div class="code-example">
Session campaign CONTAINS "ecommerce"<br>
Session manual ad content CONTAINS "VALES" | "pollo" | "embutidos"
        </div>

        <div class="tip-box">
          <strong>üîé Consejo Pro:</strong> Usa "Explorations" en GA4 para an√°lisis m√°s profundos. Ve a Explore ‚Üí Blank ‚Üí Agrega dimensiones de Session source, Session medium, Session campaign y Session manual ad content.
        </div>
      </div>

      <!-- CONSEJOS EXTRA -->
      <div class="modal-section">
        <h3>üíé Consejos de Filtrado Extra</h3>
        <ul>
          <li><strong>Usa filtros combinados:</strong> Source + Medium + Campaign para precisi√≥n m√°xima</li>
          <li><strong>Crea segmentos:</strong> Guarda tus filtros favoritos como segmentos reutilizables</li>
          <li><strong>Compara per√≠odos:</strong> Usa date ranges para ver evoluci√≥n temporal</li>
          <li><strong>Secondary dimensions:</strong> Agrega Session manual ad content para ver creatividades</li>
          <li><strong>Custom channel groups:</strong> Agrupa plataformas similares para reportes ejecutivos</li>
        </ul>
      </div>

      <!-- MOTIVO Y CREATIVIDAD -->
      <div class="modal-section">
        <h3>üé® Especificaci√≥n de Motivo y Creatividad</h3>
        <p>Es crucial ser espec√≠fico en el campo "Motivo/Creatividad" para identificar exactamente qu√© pieza gr√°fica o mensaje est√° generando resultados:</p>

        <div class="warning-box">
          <strong>‚ö†Ô∏è MUY IMPORTANTE - Restricciones de Caracteres:</strong>
          <p style="margin:8px 0 0 0;"><strong>NO uses espacios, tildes, √±, ni caracteres especiales</strong> en los campos de la UTM. Estos elementos rompen la estructura de la UTM e impiden el tracking posterior en Analytics.</p>

          <h4 style="margin-top:16px;margin-bottom:8px;color:#ef4444;">‚ùå CARACTERES PROHIBIDOS:</h4>
          <div class="code-example" style="margin-top:8px;">
‚Ä¢ Espacios: "pollo parrillero" ‚ùå<br>
‚Ä¢ Tildes: "promoci√≥n", "v√°lido", "m√°s" ‚ùå<br>
‚Ä¢ E√±es: "dise√±o", "ni√±o" ‚ùå<br>
‚Ä¢ Puntuaci√≥n espa√±ola: "¬øqu√©?", "¬°wow!" ‚ùå<br>
‚Ä¢ Acentos sueltos: "¬¥", "`" ‚ùå<br>
‚Ä¢ Especiales: "%", "&", "#", "√ó", "/", "\", "&lt;", "&gt;", etc. ‚ùå
          </div>

          <h4 style="margin-top:16px;margin-bottom:8px;color:#10b981;">‚úÖ USA EN SU LUGAR:</h4>
          <div class="code-example" style="margin-top:8px;background:#f0fdf4;border-color:#86efac;">
‚úÖ "pollo_parrillero" (gui√≥n bajo en lugar de espacio)<br>
‚úÖ "promocion", "valido", "mas" (sin tildes)<br>
‚úÖ "diseno", "nino" (reemplaza √± ‚Üí n)<br>
‚úÖ "que", "wow" (sin signos de puntuaci√≥n)<br>
‚úÖ "2x1", "descuento20" (n√∫meros y letras simples)
          </div>

          <p style="margin-top:12px;"><strong>üí° Tip:</strong> El sistema limpia autom√°ticamente estos caracteres mientras escribes, pero es mejor evitarlos desde el inicio.</p>
        </div>

        <div class="tip-box">
          <strong>‚úÖ BUENAS PR√ÅCTICAS:</strong>
          <ul style="margin-top:8px;">
            <li>Usa guiones bajos (_) en lugar de espacios</li>
            <li>Usa nombres descriptivos y √∫nicos</li>
            <li>Incluye el formato si es relevante: "video_pollo", "carousel_hamburguesa"</li>
            <li>Diferencia versiones: "VALES_v1", "VALES_v2"</li>
            <li>Especifica promociones: "descuento20", "2x1pollo"</li>
            <li>Indica el producto exacto: "pechugaentera", "hotdog"</li>
            <li>Evita tildes: usa "promocion" en vez de "promoci√≥n"</li>
          </ul>
        </div>

        <div class="code-example">
‚ùå MAL: motivo = "¬øpromoci√≥n v√°lida?"<br>
‚úÖ BIEN: motivo = "promocion_valida"<br><br>
‚ùå MAL: motivo = "¬°oferta 2√ó1!"<br>
‚úÖ BIEN: motivo = "oferta_2x1"<br><br>
‚ùå MAL: motivo = "dise√±o navide√±o" (tiene espacio y √±)<br>
‚úÖ BIEN: motivo = "diseno_navideno"<br><br>
‚ùå MAL: motivo = "m√°s_productos" (tiene tilde)<br>
‚úÖ BIEN: motivo = "mas_productos"
        </div>

        <p><strong>Esto evita:</strong></p>
        <ul>
          <li>Confusi√≥n entre campa√±as similares</li>
          <li>Mezcla de datos de diferentes creatividades</li>
          <li>Imposibilidad de identificar el origen exacto de las conversiones</li>
          <li><strong>Errores de tracking por caracteres no permitidos</strong></li>
        </ul>
      </div>

      <!-- EJEMPLOS PR√ÅCTICOS -->
      <div class="modal-section">
        <h3>üíº Ejemplos Pr√°cticos</h3>

        <h4>Ejemplo 1: Campa√±a Brand en Meta</h4>
        <div class="code-example">
URL: https://delivery.sanfernando.pe/categorias/pollo<br>
Divisi√≥n: Brand<br>
Plataforma: Meta (FB/IG)<br>
Objetivo: Conversiones<br>
Tipo: AON<br>
Placement: META<br>
C√≥digo pieza: AON<br>
N√∫mero pieza: 01<br>
Motivo: pollo_parrillero_video<br><br>
<strong>UTM generada:</strong><br>
utm_source=facebook<br>
utm_medium=paid-social<br>
utm_campaign=brand_conv_AON_OCTUBRE_2025<br>
utm_content=brand_AON_01_META_pollo_parrillero_video
        </div>

        <h4>Ejemplo 2: Campa√±a Ecommerce en Google</h4>
        <div class="code-example">
URL: https://delivery.sanfernando.pe/vales<br>
Divisi√≥n: Ecommerce<br>
Plataforma: Google<br>
Medium: paid-search (SEM)<br>
Objetivo: Conversiones<br>
Tipo: account_link<br>
Motivo: VALES_descuento20<br><br>
<strong>UTM generada:</strong><br>
utm_source=google<br>
utm_medium=paid-search<br>
utm_campaign=ecommerce_conv_account_link_OCTUBRE_2025<br>
utm_content=ecom_GOOGLE_VALES_descuento20
        </div>

        <h4>Ejemplo 3: Campa√±a Ecommerce en Meta</h4>
        <div class="code-example">
URL: https://delivery.sanfernando.pe/categorias/embutidos<br>
Divisi√≥n: Ecommerce<br>
Plataforma: Meta (FB/IG)<br>
Placement: FB (Solo Facebook)<br><br>
Objetivo: Conversiones<br>
Tipo: Cyber<br>
Motivo: chorizo_parrillero_2x1<br><br>
<strong>UTM generada:</strong><br>
utm_source=facebook<br>
utm_medium=paid-social<br>
utm_campaign=ecommerce_conv_Cyber_OCTUBRE_2025<br>
utm_content=ecom_FB_chorizo_parrillero_2x1
        </div>

        <h4>Ejemplo 4: Campa√±a Brand en TikTok</h4>
        <div class="code-example">
URL: https://delivery.sanfernando.pe/<br>
Divisi√≥n: Brand<br>
Plataforma: TikTok<br>
Objetivo: Alcance<br>
Tipo: Cyber<br>
C√≥digo pieza: HUE<br>
N√∫mero pieza: 03<br>
Motivo: huevos_frescos_dance<br><br>
<strong>UTM generada:</strong><br>
utm_source=tiktok<br>
utm_medium=paid-social<br>
utm_campaign=brand_alc_Cyber_OCTUBRE_2025<br>
utm_content=brand_HUE_03_TIKTOK_huevos_frescos_dance
        </div>
      </div>

      <!-- FAQ -->
      <div class="modal-section">
        <h3>‚ùì Preguntas Frecuentes</h3>

        <div class="faq-item">
          <div class="faq-question">¬øPor qu√© Ecommerce no usa c√≥digos de pieza?</div>
          <div class="faq-answer">Es una diferencia en la estrategia de naming. Ecommerce se enfoca en el producto/motivo directamente, mientras que Brand necesita un sistema m√°s estructurado para sus creatividades y campa√±as de awareness.</div>
        </div>

        <div class="faq-item">
          <div class="faq-question">¬øC√≥mo s√© qu√© c√≥digo de pieza usar?</div>
          <div class="faq-answer">Los c√≥digos identifican la campa√±a principal (AON = Always On, NAB2B = Navidad B2B, HUE = Huevos, Elaborados = Elaborados). El n√∫mero de pieza (01-30) identifica la creatividad espec√≠fica dentro de esa campa√±a.</div>
        </div>

        <div class="faq-item">
          <div class="faq-question">¬øQu√© es "account_link" en Google?</div>
          <div class="faq-answer">Es un tipo de campa√±a especial que solo aparece para Google. Se usa para elementos compartidos entre distintas campa√±as de Google Ads que no se limitan a un objetivo espec√≠fico, como p√≠xeles de conversi√≥n, p√∫blicos similares, o configuraciones de cuenta que aplican a m√∫ltiples campa√±as simult√°neamente.</div>
        </div>

        <div class="faq-item">
          <div class="faq-question">¬øPuedo usar la misma UTM en varios lugares?</div>
          <div class="faq-answer">S√≠, pero NO es recomendable. Cada UTM debe ser √∫nica para cada ubicaci√≥n/creatividad. Si usas la misma UTM en Facebook e Instagram, no podr√°s diferenciar de d√≥nde vino el tr√°fico.</div>
        </div>

        <div class="faq-item">
          <div class="faq-question">¬øLos par√°metros UTM son case-sensitive?</div>
          <div class="faq-answer">S√≠. "VALES", "vales" y "Vales" se consideran diferentes en Analytics. El generador mantiene consistencia, pero ten cuidado si editas manualmente.</div>
        </div>

        <div class="faq-item">
          <div class="faq-question">¬øPuedo exportar mi historial?</div>
          <div class="faq-answer">S√≠, usa el bot√≥n "üì• CSV" en el historial para descargar todas tus UTMs generadas en formato Excel/CSV.</div>
        </div>

        <div class="faq-item">
          <div class="faq-question">¬øQu√© hago si veo tr√°fico "Unassigned" en GA4?</div>
          <div class="faq-answer">Significa que GA4 no pudo categorizar autom√°ticamente ese tr√°fico. Usa el filtro "Session source / medium" para ver de d√≥nde viene y ajusta tu nomenclatura si es necesario.</div>
        </div>
      </div>

      <!-- BUENAS PR√ÅCTICAS FINALES -->
      <div class="modal-section">
        <h3>‚ú® Buenas Pr√°cticas Finales</h3>
        <ul>
          <li>‚úÖ Siempre completa todos los campos obligatorios</li>
          <li>‚úÖ S√© consistente con la nomenclatura (may√∫sculas/min√∫sculas)</li>
          <li>‚úÖ Usa nombres descriptivos en "Motivo/Creatividad"</li>
          <li>‚úÖ Guarda tu historial exportando regularmente a CSV</li>
          <li>‚úÖ Prueba tus UTMs antes de lanzar campa√±as grandes</li>
          <li>‚úÖ Documenta tus convenciones de naming para todo el equipo</li>
          <li>‚úÖ Usa guiones bajos (_) para separar palabras</li>
          <li>‚ùå <strong>No uses espacios (rompen la UTM)</strong></li>
          <li>‚ùå <strong>No uses tildes ni √± (impiden tracking)</strong></li>
          <li>‚ùå <strong>No uses caracteres especiales: ¬ø¬°¬¥`, %, &, #, √ó, /, etc.</strong></li>
          <li>‚ùå No reutilices UTMs para campa√±as diferentes</li>
          <li>‚ùå No agregues UTMs a enlaces internos de tu sitio</li>
        </ul>

        <div class="warning-box" style="margin-top:20px;">
          <strong>üö® RECUERDA:</strong> Los espacios, tildes, e√±es y caracteres especiales espa√±oles (¬ø¬°¬¥`) son la causa #1 de UTMs rotas. Siempre revisa antes de implementar.
        </div>
      </div>

    </div>
  </div>
</div>

<!-- JavaScript Files -->
<script src="js/constants.js"></script>
<script src="js/utils.js"></script>
<script src="js/config.js"></script>
<script src="js/theme.js"></script>
<script src="js/form.js"></script>
<script src="js/utm.js"></script>
<script src="js/history.js"></script>
<script src="js/export.js"></script>
<script src="js/validation.js"></script>
<script src="js/modals.js"></script>
<script src="js/main.js"></script>

</body>
</html>
